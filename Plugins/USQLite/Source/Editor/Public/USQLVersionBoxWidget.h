//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////
///			Copyright 2018 (C) Bruno Xavier B. Leite
//////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

#pragma once

#include "USQLite.h"
#include "USQLite_Shared.h"
#include "Widgets/Input/SComboBox.h"

//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

class SQLVersionBoxWidget : public SCompoundWidget {
private:
	TSharedPtr<SComboBox<TSharedPtr<FString>>> ComboBox;
	TArray<TSharedPtr<FString>> BoxItems;
	//
	TSharedPtr<IPropertyHandle> VersionList;
	TSharedPtr<IPropertyHandle> Version;
public:
	SQLVersionBoxWidget();
	virtual ~SQLVersionBoxWidget() override;
	//
	SLATE_BEGIN_ARGS(SQLVersionBoxWidget)
	:  _Version(), _VersionList()
	{}//
		SLATE_ATTRIBUTE(TSharedPtr<IPropertyHandle>,Version)
		SLATE_ATTRIBUTE(TSharedPtr<IPropertyHandle>,VersionList)
	SLATE_END_ARGS()
	//
	void Construct(const FArguments &InArgs);
	//
	FText GetComboBoxContent() const;
	TSharedRef<SWidget> OnGenerateComboBox(TSharedPtr<FString>InItem);
	void OnComboBoxSelectionChanged(TSharedPtr<FString>NewSelection, ESelectInfo::Type SelectInfo);
};

//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////