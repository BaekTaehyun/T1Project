//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////
///			Copyright 2018 (C) Bruno Xavier B. Leite
//////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

#pragma once

#include "USQLite.h"
#include "USQLite_Shared.h"
#include "Widgets/Input/SComboBox.h"

//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

class SQLTableWidget;

//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

class SQLComboBoxWidget : public SCompoundWidget {
private:
	TSharedPtr<SComboBox<TSharedPtr<FString>>> ComboBox;
	TArray<TSharedPtr<FString>> KeyTypeList;
	TArray<TSharedPtr<FString>> TypeList;
	TSharedPtr<SQLTableWidget> Owner;
	TSharedPtr<FString> ColumnType;
	TSharedPtr<uint32> ColumnID;
public:
	SQLComboBoxWidget();
	virtual ~SQLComboBoxWidget() override;
	//
	SLATE_BEGIN_ARGS(SQLComboBoxWidget)
	: _Owner(), _ColumnType(), _ColumnID()
	{}//
		SLATE_ATTRIBUTE(TSharedPtr<SQLTableWidget>,Owner)
		SLATE_ATTRIBUTE(TSharedPtr<FString>,ColumnType)
		SLATE_ATTRIBUTE(TSharedPtr<uint32>,ColumnID)
	SLATE_END_ARGS()
	//
	void Construct(const FArguments &InArgs);
	//
	FText GetComboBoxContent() const;
	TSharedRef<SWidget> OnGenerateTypeComboBox(TSharedPtr<FString>InItem);
	void OnTypeComboBoxSelectionChanged(TSharedPtr<FString>NewSelection, ESelectInfo::Type SelectInfo);
};

//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////